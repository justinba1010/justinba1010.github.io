{"version":3,"sources":["game.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["Action","NUM","reducer","state","action","type","OpenBox","isOver","openBoxes","length","Math","floor","Object","objectSpread","isWin","trials","concat","toConsumableArray","indexOf","box","number","permutation","SetUp","name","Game","props","_React$useReducer","React","useReducer","uuid","_React$useReducer2","slicedToArray","dispatch","useEffect","uid","localStorage","getItem","random","pow","setItem","trialStore","JSON","parse","stringify","bubbles","slice","map","trial","react_default","a","createElement","className","boxes","Array","from","keys","i","game_Box","open","index","message","Fragment","Grid","container","spacing","Box","view","item","onClick","num","arr","shuffle","firstHalf","secondHalf","firstHalfShuffled","secondHalfShuffled","forEach","j","_ref","toArray","m","_ref3","App","game_Game","reportWebVitals","onPerfEntry","Function","__webpack_require__","e","then","bind","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","createRoot","document","getElementById","render","StrictMode","src_App"],"mappings":"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","file":"static/js/main.bf3894c3.chunk.js","sourcesContent":["import React from \"react\";\nimport { Grid } from \"@mui/material\";\n\nexport interface GameProps {}\n\ninterface GameState {\n  openBoxes: number[];\n  permutation: number[];\n  uuid: string;\n  name: string;\n  number: number;\n  isOver: boolean;\n  isWin: boolean;\n  trials: boolean[];\n}\n\nenum Action {\n  OpenBox,\n  SetUp,\n}\n\nconst NUM = 100;\n\nfunction reducer(state: GameState, action: any) {\n  switch (action.type) {\n    case Action.OpenBox:\n      if (state.isOver) {\n        return state;\n      }\n      if (state.openBoxes.length > Math.floor(NUM / 2)) {\n        return {\n          ...state,\n          isOver: true,\n          isWin: false,\n          trials: [...state.trials, false],\n        };\n      }\n      if (state.openBoxes.indexOf(action.box) === -1) {\n        if (state.number == state.permutation[action.box - 1]) {\n          return {\n            ...state,\n            openBoxes: [...state.openBoxes, action.box],\n            isOver: true,\n            isWin: true,\n            trials: [...state.trials, true],\n          };\n        }\n        return { ...state, openBoxes: [...state.openBoxes, action.box] };\n      }\n      break;\n    case Action.SetUp:\n      return {\n        ...state,\n        openBoxes: [] as number[],\n        permutation: action.permutation,\n        name: action.name,\n        number: action.number,\n        isOver: false,\n        isWin: false,\n        trials: action.trials,\n      };\n      break;\n  }\n  return state;\n}\n\nexport const Game = (props: GameProps) => {\n  const [state, dispatch] = React.useReducer(reducer, {\n    openBoxes: [],\n    permutation: [],\n    uuid: \"\",\n    name: \"\",\n    number: 0,\n    isOver: false,\n    isWin: false,\n    trials: [],\n  });\n\n  React.useEffect(() => {\n    var uid = localStorage.getItem(\"uuid\");\n    var uuid = 0;\n    if (uid) {\n      uuid = +uid;\n    } else {\n      uuid = Math.floor(Math.random() * 2 ** 31);\n      localStorage.setItem(\"uuid\", uuid + \"\");\n    }\n    const number = uuid % NUM;\n\n    var trialStore = localStorage.getItem(\"trials\");\n    var trials: boolean[] = [];\n    if (trialStore) {\n      trials = JSON.parse(trialStore).trials;\n    }\n\n    dispatch({\n      type: Action.SetUp,\n      number,\n      uuid,\n      trials,\n      permutation: permutation(NUM),\n    });\n  }, []);\n\n  React.useEffect(() => {\n    if (state.trials.length == 0) {\n      return;\n    }\n    localStorage.setItem(\"trials\", JSON.stringify({ trials: state.trials }));\n  }, [state.trials]);\n\n  const bubbles = state.trials\n    .slice(state.trials.length - 10)\n    .map((trial) =>\n      trial ? <span className={\"hit\"}></span> : <span className={\"miss\"}></span>\n    );\n  const boxes = Array.from(Array(NUM).keys()).map((i: number) => (\n    <Box\n      isOver={state.isOver}\n      open={state.openBoxes.indexOf(i + 1) > -1}\n      dispatch={dispatch}\n      index={i + 1}\n      permutation={state.permutation}\n    />\n  ));\n\n  const message = state.isOver ? (\n    <h2>{state.isWin ? \"You won!\" : \"You lost!\"}</h2>\n  ) : null;\n\n  return (\n    <>\n      <h2>You're Prisoner #{state.number}</h2>\n      {message}\n      {bubbles}\n      <Grid container spacing={2}>\n        {boxes}\n      </Grid>\n    </>\n  );\n};\n\nexport const Box = (props: {\n  isOver: boolean;\n  open: boolean;\n  index: number;\n  dispatch: any;\n  permutation: number[];\n}) => {\n  const view = props.open ? (\n    <span className={\"clicked\"}>{props.permutation[props.index - 1]}</span>\n  ) : (\n    props.index\n  );\n  return (\n    <Grid item>\n      <button\n        className={props.isOver ? \"button2\" : \"button1\"}\n        onClick={() =>\n          props.dispatch({\n            type: Action.OpenBox,\n            box: props.index,\n          })\n        }\n      >\n        {view}\n      </button>\n    </Grid>\n  );\n};\n\nfunction permutation(num: number) {\n  let arr = shuffle(Array.from(Array(NUM).keys()).map((i) => NUM - i));\n  const firstHalf = arr.slice(0, Math.floor(NUM / 2));\n  const secondHalf = arr.slice(Math.floor(NUM / 2));\n\n  const firstHalfShuffled = shuffle(firstHalf);\n  const secondHalfShuffled = shuffle(secondHalf);\n\n  firstHalf.forEach((i, j) => {\n    arr[i - 1] = firstHalfShuffled[j];\n  });\n  secondHalf.forEach((i, j) => {\n    arr[i - 1] = secondHalfShuffled[j];\n  });\n  return arr;\n}\n\n// Fisher-Yates\n// https://decipher.dev/30-seconds-of-typescript/docs/shuffle/\nconst shuffle = ([...arr]) => {\n  let m = arr.length;\n  while (m) {\n    const i = Math.floor(Math.random() * m--);\n    [arr[m], arr[i]] = [arr[i], arr[m]];\n  }\n  return arr;\n};\n","import React from 'react';\nimport logo from './logo.svg';\nimport './App.css';\nimport { Game } from './game';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <h1>Prisoner Game</h1>\n      <Game />\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nconst root = ReactDOM.createRoot(\n  document.getElementById('root') as HTMLElement\n);\nroot.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}